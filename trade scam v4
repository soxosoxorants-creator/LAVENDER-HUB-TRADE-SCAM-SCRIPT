local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "LavenderTradePro"
ScreenGui.Parent = game:GetService("CoreGui")

local Main = Instance.new("Frame")
Main.Parent = ScreenGui
Main.BackgroundColor3 = Color3.fromRGB(20, 18, 28)
Main.Size = UDim2.new(0, 180, 0, 185) -- Slightly taller for 4 toggles
Main.Position = UDim2.new(0.5, -90, 0.4, 0)
Main.Active = true
Main.Draggable = true
Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 10)

local Title = Instance.new("TextLabel")
Title.Parent = Main
Title.Size = UDim2.new(1, 0, 0, 28)
Title.BackgroundColor3 = Color3.fromRGB(160, 130, 255)
Title.Text = "LAVENDER TRADE V4"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 12
Instance.new("UICorner", Title).CornerRadius = UDim.new(0, 10)

local function CreateToggle(name, pos, callback)
    local Label = Instance.new("TextLabel")
    Label.Parent = Main
    Label.Text = "  " .. name
    Label.Size = UDim2.new(0, 110, 0, 30)
    Label.Position = UDim2.new(0, 5, 0, pos)
    Label.BackgroundTransparency = 1
    Label.TextColor3 = Color3.fromRGB(220, 220, 220)
    Label.Font = Enum.Font.Gotham
    Label.TextSize = 11
    Label.TextXAlignment = Enum.TextXAlignment.Left

    local BG = Instance.new("TextButton")
    BG.Parent = Main
    BG.Text = ""
    BG.Size = UDim2.new(0, 30, 0, 16)
    BG.Position = UDim2.new(0.78, 0, 0, pos + 7)
    BG.BackgroundColor3 = Color3.fromRGB(45, 40, 60)
    Instance.new("UICorner", BG).CornerRadius = UDim.new(1, 0)

    local Slider = Instance.new("Frame")
    Slider.Parent = BG
    Slider.Size = UDim2.new(0, 12, 0, 12)
    Slider.Position = UDim2.new(0, 2, 0.5, -6)
    Slider.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Instance.new("UICorner", Slider).CornerRadius = UDim.new(1, 0)

    local enabled = false
    BG.MouseButton1Click:Connect(function()
        enabled = not enabled
        Slider:TweenPosition(enabled and UDim2.new(1, -14, 0.5, -6) or UDim2.new(0, 2, 0.5, -6), "Out", "Quad", 0.2, true)
        BG.BackgroundColor3 = enabled and Color3.fromRGB(180, 150, 255) or Color3.fromRGB(45, 40, 60)
        callback(enabled)
    end)
end

-- --- FEATURES ---

-- 1. Freeze Trade
CreateToggle("Freeze Trade", 35, function(state)
    _G.Freeze = state
end)

-- 2. Auto Accept
CreateToggle("Auto Accept", 70, function(state)
    _G.AutoAccept = state
end)

-- 3. Add All Items (New Feature)
CreateToggle("Add All Items", 105, function(state)
    _G.AddAll = state
    if state then
        print("Adding all items to trade...")
        -- In the video, this is where you show the slots filling up instantly
    end
end)

-- 4. Safe Mode (Renamed)
CreateToggle("Safe Mode", 140, function(state)
    if state then
        -- Visually masks the UI and changes player name to "LocalPlayer"
        for _, v in pairs(game:GetService("Players").LocalPlayer.PlayerGui:GetDescendants()) do
            if v:IsA("TextLabel") and v.Text == game.Players.LocalPlayer.Name then
                v.Text = "LocalPlayer"
            end
        end
    end
end)
